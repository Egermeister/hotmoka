<project name="takamaka_distribution" default="dist Java 8" basedir=".">
  <description>
    Compiles all Takamaka modules
  </description>

  <property name="dist" location="dist"/>
  <property name="version" value="1.0"/>

  <target name="clean" description="clean up">
	<delete dir="${dist}"/>
  </target>

  <target name="init" depends="clean">
    <mkdir dir="${dist}"/>
  </target>

  <target name="dist" depends="init" description="generate the distribution">
  	<ant dir="../takamaka_whitelisting" target="dist" />
  	<!-- The following is compiled with Java 8 since it will only be installed and run in blockchain -->
  	<ant dir="../takamaka_code" target="dist Java 8" />
  	<ant dir="../takamaka_verification" target="dist" />
  	<ant dir="../takamaka_instrumentation" target="dist" />
  	<ant dir="../takamaka_blockchain" target="dist" />
  	<ant dir="../takamaka_tools" target="dist" />
  </target>

  <target name="dist Java 8" depends="init" description="generate the distribution for Java 8">
  	<ant dir="../takamaka_whitelisting" target="dist Java 8" />
  	<ant dir="../takamaka_code" target="dist Java 8" />
  	<ant dir="../takamaka_verification" target="dist Java 8" />
	<ant dir="../takamaka_instrumentation" target="dist Java 8" />
  	<ant dir="../takamaka_blockchain" target="dist Java 8" />
  	<ant dir="../takamaka_tools" target="dist Java 8" />
  </target>

</project>
